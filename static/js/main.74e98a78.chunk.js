(this.webpackJsonpethereum_utils=this.webpackJsonpethereum_utils||[]).push([[0],{109:function(e,t,n){"use strict";var a=n(27),r=n(181),c=n.n(r),i=(n(304),n(305),n(37)),s=n(313),o=n(5);t.a=function(e){var t=Object(i.a)(),n=Object(s.a)(t.breakpoints.up(800));return Object(o.jsx)(c.a,Object(a.a)({width:"100%",fontSize:14,showGutter:n,wrapEnabled:!0,showPrintMargin:!0,highlightActiveLine:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,tabSize:2,debounceChangePeriod:600},e))}},110:function(e,t,n){"use strict";var a=n(27),r=n(112),c=n(104),i=n(312),s=n(130),o=n(5),u=["children"],l=Object(i.a)((function(e){return{paper:Object(c.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(800+2*e.spacing(2)),{width:800,marginLeft:"auto",marginRight:"auto"})}}));t.a=function(e){var t=e.children,n=Object(r.a)(e,u),c=l();return Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({className:c.paper},n),{},{children:t}))}},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(15),r=n(52),c=n(0),i=n(71),s=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],s=t[1],o=Object(r.c)(),u=o.active,l=o.activate,d=Object(c.useCallback)((function(){if(!u)return l(i.c)}),[u,l]);return Object(c.useEffect)((function(){i.c.isAuthorized().then((function(e){var t;e&&(null===(t=d())||void 0===t||t.then((function(){return s(!0)})))}))}),[d]),[n,d]}},206:function(e,t){},234:function(e,t){},236:function(e,t){},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}));var a=n(113),r=n(5),c=Object(a.a)("div")({display:"flex"}),i=Object(a.a)(c)({flexDirection:"column"}),s=Object(a.a)(c)({flexDirection:"row"}),o=(Object(a.a)(c)({justifyItems:"center",alignItems:"center"}),function(e){var t=e.width,n=e.height;return Object(r.jsx)("div",{style:{width:t,height:n}})})},251:function(e,t){},272:function(e,t){},274:function(e,t){},297:function(e,t){},308:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n(3),c=n.n(r),i=n(35),s=n(27),o=n(25),u=n(312),l=n(77),d=n(320),b=n(317),f=n(110),h=n(109),p=n(76),j=n(182),g=n.n(j),m=n(361),v=n(364),x=n(365),O=n(366),y=n(367),C=n(368),B=n(0),w=n.n(B),F=n(5),S=function(e){var t=e.value,n=e.stripThreshold,r=void 0===n?50:n,c=Object(B.useState)(!1),i=Object(a.a)(c,2),s=i[0],u=i[1],l=t&&t.length>=r,d=l?(null===t||void 0===t?void 0:t.slice(0,r))+"...":t;return Object(F.jsx)(F.Fragment,{children:t&&Object(F.jsx)(m.a,{error:!0,children:Object(F.jsxs)(o.b,{children:[d,l&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(o.c,{width:3}),Object(F.jsx)(v.a,{component:"button",onClick:function(){return u(!0)},color:"inherit",underline:"always","aria-label":t,children:"more"}),Object(F.jsxs)(x.a,{scroll:"paper",open:s,onClose:function(){return u(!1)},children:[Object(F.jsx)(O.a,{children:"Error"}),Object(F.jsx)(y.a,{children:Object(F.jsx)(C.a,{children:t})})]})]})]})})})},I=n(369),M=n(184),_=n(362),k=n(370),P=function(e){var t=e.selectedIndex,n=e.actions,r=e.onActionSelect,c=e.groupProps,i=w.a.useState(!1),o=Object(a.a)(i,2),u=o[0],l=o[1],d=w.a.useState(null),f=Object(a.a)(d,2),h=f[0],p=f[1];return Object(F.jsxs)(I.a,Object(s.a)(Object(s.a)({},c),{},{children:[n[t].action,Object(F.jsx)(b.a,{onClick:function(e){var t=e.currentTarget;p(t),l(Boolean(t))},children:Object(F.jsx)(k.a,{})}),Object(F.jsx)(M.a,{keepMounted:!0,anchorEl:h,open:u,onClose:function(){return l(!1)},children:n.map((function(e,n){return Object(F.jsx)(_.a,{selected:n===t,onClick:function(){r(e,n),l(!1)},children:e.label},e.label)}))})]}))},E=Object(u.a)((function(e){return{container:{alignItems:"center","& > *":{width:"100%"}},bottomContainer:{justifyContent:"flex-end",flexWrap:"wrap","& > *":{marginBottom:"8px"}},nodeInput:{height:"40px",borderColor:"transparent",borderRadius:0},actionBtn:{marginLeft:"16px"}}})),T=function(e){var t=e.rawTransactionHelperText,n=e.rawTransactionValue,a=e.onRawTransactionInputChange,r=e.jsonTransactionHelperText,c=e.jsonTransactionValue,i=e.onJsonTransactionInputChange,u=e.txidValue,j=e.senderAddressValue,m=e.nodeSelectedIndex,v=e.onNodeSelect,x=e.isWalletInjected,O=e.injectWallet,y=e.customNodeValue,C=e.onCustomNodeValueChange,B=e.actionBtnState,w=E();return Object(F.jsx)(f.a,{children:Object(F.jsxs)(o.a,{className:w.container,children:[Object(F.jsx)(l.a,{component:"h1",variant:"h4",align:"center",children:"Transaction"}),Object(F.jsx)(o.c,{height:32}),Object(F.jsx)(h.a,{name:"transaction_editor",placeholder:'\n// Input json format transaction here like this:\n{\n  "nonce": 0,\n  "gasPrice": "0x0df8475800",\n  "gasLimit": "0x0186a0",\n  "to": "0x3535353535353535353535353535353535353535",\n  "value": "0x64",\n  "data": "0x",\n  "chainId": 0,\n  "v": 27,\n  "r": "0x82de9950cc5aac0dca7210cb4b77320ac9e844717d39b1781e9d941d920a1206",\n  "s": "0x1da497b3c134f50b2fce514d66e20c5e43f9615f097395a5527041d14860a52f"\n}\n',mode:"json",theme:"tomorrow_night_eighties",value:c,onChange:i,"aria-describedby":"transaction_editor_helper_text"}),r&&Object(F.jsx)(S,{value:r}),Object(F.jsx)(o.c,{height:3}),Object(F.jsx)(g.a,{color:"disabled"}),Object(F.jsx)(o.c,{height:3}),Object(F.jsx)(d.a,{error:!!t,multiline:!0,maxRows:5,variant:"outlined",label:n&&n.length>0?"Raw Transaction":void 0,placeholder:"\n// or hex string raw transaction like this:\n0xf86580850df8475800830186a094353535353535353535353535353535353535353564801ba082de9950cc5aac0dca7210cb4b77320ac9e844717d39b1781e9d941d920a1206a01da497b3c134f50b2fce514d66e20c5e43f9615f097395a5527041d14860a52f\n",value:n,onChange:function(e){return a(e.target.value)}}),t&&Object(F.jsx)(S,{value:t}),Object(F.jsx)(o.c,{height:16}),Object(F.jsx)(p.a,{id:"txid",FormHelperTextProps:{variant:"standard"},value:u,label:"Txid"}),Object(F.jsx)(o.c,{height:8}),Object(F.jsx)(p.a,{id:"sender_address",value:j,label:"Sender Address"}),Object(F.jsx)(o.c,{height:16}),Object(F.jsxs)(o.b,{className:w.bottomContainer,children:[Object(F.jsx)(P,{selectedIndex:m,onActionSelect:function(e,t){return v(t)},actions:[{label:"Default ETH Mainnet",action:Object(F.jsx)(b.a,{children:"ETH Mainnet"})},{label:"Connect Wallet",action:Object(F.jsx)(b.a,{onClick:O,children:x?"Connected":"Connect Wallet"})},{label:"Custom",action:Object(F.jsx)(d.a,{variant:"outlined",value:y,placeholder:"https://my_rpc_node.com",onChange:function(e){return C(e.target.value)},InputProps:{className:w.nodeInput}})}],groupProps:{variant:"contained",color:"primary"}}),Object(F.jsx)(b.a,Object(s.a)({className:w.actionBtn,variant:"contained",color:"secondary"},B))]})]})})},D=n(95),H=n(63),N=n(24),A=n(381),W={chain_id:"chainId",gas_limit:"gasLimit",gas:"gasLimit",gas_price:"gasPrice",access_list:"accessList",max_priority_fee_per_gas:"maxPriorityFeePerGas",max_fee_per_gas:"maxFeePerGas",input:"data"},J=function(e){return"undefined"===typeof e?"0x00":A.a.from("number"===typeof e?e.toString():e).toHexString()},L=function(e){return parseInt(J(e),16)},G={hash:N.addHexPrefix,from:N.addHexPrefix,to:N.addHexPrefix,nonce:L,gasLimit:function(e){return J(Math.max(21e3,L(e)))},gasPrice:J,data:N.addHexPrefix,value:J,chainId:L,type:L,maxPriorityFeePerGas:J,maxFeePerGas:J,r:N.addHexPrefix,s:N.addHexPrefix,v:L},V=["to","nonce","gasLimit","gasPrice","data","value","chainId","type","accessList","maxPriorityFeePerGas","maxFeePerGas"],R=["r","s","v"],z=[].concat(V,R,["hash","from"]),U=function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(a.a)(e,2);t[0];return!function(e){return"undefined"===typeof e||null===e||"string"===typeof e&&0===e.length}(t[1])})).map((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return[n in W?W[n]:n,n in G?G[n](r):r]})).filter((function(e){var t=Object(a.a)(e,2),n=t[0];t[1];return z.includes(n)})))},K=function(e){var t=U(e),n=function(e){var t=Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(a.a)(e,2),n=t[0];return t[1],R.includes(n)})));return Object.keys(t).length!==R.length&&(t=void 0),t}(t),r=Object.fromEntries(Object.entries(t).filter((function(e){var t=Object(a.a)(e,2),n=t[0];t[1];return V.includes(n)})));return Object(H.c)(r,n)},q=function(e){return U(Object(H.b)(e))},Y={1:"https://etherscan.io/tx/{0}",3:"https://ropsten.etherscan.io/tx/{0}",56:"https://bscscan.com/tx/{0}",97:"https://testnet.bscscan.com/tx/{0}",128:"https://hecoinfo.com/tx/{0}",256:"https://testnet.hecoinfo.com/{0}"},Q=n(111),X=n(52),Z=n(71),$=n(311),ee=n(129),te=n(371),ne={disabled:!0,children:"Pending"},ae=function(){var e=Object(i.a)(c.a.mark((function e(t,n,a){var r,i,s,o,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.signed,i=n.txid,s=n.chainId,o=n.payload,u=void 0,e.next=4,t.getNetwork();case 4:if(l=e.sent,!r){e.next=19;break}if(s===l.chainId){e.next=10;break}u={disabled:!0,children:"ChainId Mismatched"},e.next=16;break;case 10:if(!i){e.next=16;break}return e.next=13,t.send("eth_getTransactionByHash",[i]);case 13:d=e.sent,console.log("fetch tx: ",d),"object"===typeof d&&null!==d&&d.hash===i&&(u={disabled:!1,children:"Transaction Found!",onClick:function(){return window.open((Y[s]||"{0}").replace("{0}",i))}});case 16:u||(u={disabled:!1,children:"Broadcast",onClick:function(){return t.send("eth_sendRawTransaction",[K(o)])}}),e.next=20;break;case 19:t instanceof $.a&&(u={disabled:!1,children:"Sign & Broadcast",onClick:function(){return t.getSigner().sendTransaction(Object.assign(o,{chainId:l.chainId})).then((function(e){return a(Object.assign(e,{chainId:l.chainId}))}))}});case 20:return e.abrupt("return",u||ne);case 21:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();t.default=function(){var e=Object(B.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(B.useState)(),o=Object(a.a)(s,2),u=o[0],l=o[1],d=Object(B.useState)(""),b=Object(a.a)(d,2),f=b[0],h=b[1],p=Object(B.useState)(),j=Object(a.a)(p,2),g=j[0],m=j[1],v=Object(B.useState)(),x=Object(a.a)(v,2),O=x[0],y=x[1],C=Object(B.useState)(0),w=Object(a.a)(C,2),S=w[0],I=w[1],M=Object(X.c)(),_=M.active,k=M.library,P=Object(Q.a)(),E=Object(a.a)(P,2),H=E[0],A=E[1],W=Object(B.useState)(""),J=Object(a.a)(W,2),L=J[0],G=J[1],V=Object(B.useMemo)((function(){return 0===S?Object(Z.a)():1===S?k:2===S&&function(e){var t,n,a;try{a=new URL(e)}catch(r){}return"http:"===(null===(t=a)||void 0===t?void 0:t.protocol)||"https:"===(null===(n=a)||void 0===n?void 0:n.protocol)}(L)?new ee.a({url:L}):void 0}),[S,k,L]),R=Object(B.useState)(ne),z=Object(a.a)(R,2),U=z[0],Y=z[1],$=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var a,i,s,o,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("updateTransaction: ",t),"raw_tx"===n?a=Object(N.addHexPrefix)(t.trim()):t&&(i=JSON.parse(t),a=K(i)),a){e.next=5;break}return y(void 0),e.abrupt("return");case 5:s=q(a),o=s.hash,u=s.from,o&&delete s.hash,u&&delete s.from,d={txid:o,chainId:s.chainId,signed:Boolean(s.r&&s.s&&s.v),sender:u,payload:s},m(void 0),h(a),l(void 0),r(Object(D.a)(s,"json")),y(d);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=Object(B.useCallback)((function(e){e!==n?$(e,"json_tx").catch((function(t){console.error(t);try{e=Object(D.a)(e,"json")}catch(n){}r(e),l(null===t||void 0===t?void 0:t.message)})):e||(r(e),l(void 0))}),[n]);return Object(B.useEffect)((function(){var e=!1;return console.log("useEffect: ",V,O),"undefined"!==typeof V&&"undefined"!==typeof O?(Y({disabled:!1,children:Object(F.jsx)(te.a,{color:"inherit",size:24})}),ae(V,O,(function(t){return!e&&re(JSON.stringify(t))})).then((function(t){return!e&&Y((function(){return t}))})).catch(console.error)):Y(ne),function(){e=!0}}),[V,O,re]),Object(B.useEffect)((function(){H&&I(1)}),[H]),Object(F.jsx)(T,{rawTransactionHelperText:g,rawTransactionValue:f,onRawTransactionInputChange:function(e){e?$(e,"raw_tx").catch((function(t){console.error(t),m(null===t||void 0===t?void 0:t.message),h(e)})):(h(e),m(void 0))},jsonTransactionHelperText:u,jsonTransactionValue:n,onJsonTransactionInputChange:re,txidValue:(null===O||void 0===O?void 0:O.txid)||"",senderAddressValue:(null===O||void 0===O?void 0:O.sender)||"",nodeSelectedIndex:S,onNodeSelect:I,isWalletInjected:_,injectWallet:A,customNodeValue:L,onCustomNodeValueChange:G,actionBtnState:U})}},309:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),i=n.n(c),s=n(71),o=n(15),u=n(312),l=n(372),d=n(373),b=n(363),f=n(77),h=n(374),p=n(183),j=n.n(p),g=n(27),m=n(37),v=n(313),x=n(378),O=n(316),y=n(356),C=n(357),B=n(25),w=n(5),F=Object(u.a)((function(e){return{drawer:{},drawerPaper:{marginTop:e.spacing(8),width:240,height:300},drawerHeader:Object(g.a)(Object(g.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),menuItem:{height:e.spacing(8)}}})),S=function(e){var t=e.menus,n=e.open,r=e.onDrawerItemClick,c=e.onClose,i=F(),s=Object(m.a)(),o=Object(v.a)(s.breakpoints.down(800)),u=Object(a.useMemo)((function(){return o?{anchor:"bottom"}:{anchor:"left",className:i.drawer,classes:{paper:i.drawerPaper}}}),[i,o]);return Object(w.jsxs)(x.a,Object(g.a)(Object(g.a)({open:n,onClose:c},u),{},{children:[t.map((function(e,t){return Object(w.jsx)(O.a,{className:i.menuItem,button:!0,onClick:function(){return r(e,t)},divider:!o,children:Object(w.jsx)(y.a,{primary:e})},e)})),o&&Object(w.jsx)(C.a,{}),Object(w.jsx)(B.c,{height:s.spacing(6)})]}))},I=Object(u.a)((function(e){return{appBar:{color:"default",position:"relative"},main:{width:"auto",marginLeft:e.spacing(1),marginRight:e.spacing(1)}}})),M=["Message","Transaction"],_={Message:function(){return n(310).default},Transaction:function(){return n(308).default}},k=function(e){var t=e.onDrawerBtnClick,n=I();return Object(w.jsx)(l.a,{className:n.appBar,children:Object(w.jsxs)(d.a,{children:[Object(w.jsx)(b.a,{color:"inherit","aria-label":"open drawer",onClick:t,edge:"start",children:Object(w.jsx)(j.a,{})}),Object(w.jsx)(f.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Ethereum Utils"})]})})},P=function(){var e=I(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(_.Message),s=Object(o.a)(i,2),u=s[0],l=s[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(h.a,{}),Object(w.jsx)(k,{onDrawerBtnClick:function(){return c((function(e){return!e}))}}),Object(w.jsx)(S,{menus:M,open:r,onClose:function(){return c((function(){return!1}))},onDrawerItemClick:function(e){l(_[e]),c(!1)}}),Object(w.jsx)("main",{className:e.main,children:Object(w.jsx)(u,{})})]})};i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(s.b,{children:Object(w.jsx)(P,{})})}),document.getElementById("root"))},310:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),c=n(27),i=n(35),s=n(15),o=n(312),u=n(77),l=n(376),d=n(362),b=n(380),f=n(317),h=n(25),p=n(0),j=n(44),g=n(109),m=n(76),v=n(110),x=n(95),O=n(5),y=Object(o.a)((function(e){return{container:{padding:0},options:{justifyContent:"flex-end",alignItems:"center",margin:e.spacing(3,0,1)},caseGroup:{flexWrap:"wrap",padding:0,marginBottom:e.spacing(1),"& > *":{margin:e.spacing(.5)}},bottomButtonGroup:{justifyContent:"flex-end",padding:0}}})),C=function(e){var t=e.methodOptions,n=e.selectedMethod,a=e.onMethodSelected,c=e.cases,o=e.checkIsTargetMessage,C=e.hashMessage,B=e.isWalletEnabled,w=e.connectedAccount,F=e.connectWallet,S=e.onSign,I=e.preferJsonStringMessage,M=y(),_=Object(p.useState)(""),k=Object(s.a)(_,2),P=k[0],E=k[1],T=Object(p.useState)(""),D=Object(s.a)(T,2),H=D[0],N=D[1],A=Object(p.useState)(""),W=Object(s.a)(A,2),J=W[0],L=W[1],G=Object(p.useState)(!0),V=Object(s.a)(G,2),R=V[0],z=V[1],U=Object(p.useState)(""),K=Object(s.a)(U,2),q=K[0],Y=K[1],Q=Object(p.useCallback)((function(e){var t=Object(x.a)(e,I?"json":"text");E(t)}),[I]),X=Object(p.useCallback)(Object(i.a)(r.a.mark((function e(){var t,n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(P);case 2:t=e.sent,n=Object(s.a)(t,2),a=n[0],c=n[1],L(a),Y(c);case 8:case"end":return e.stop()}}),e)}))),[P,S]);return Object(p.useEffect)((function(){c[0].value&&Q(c[0].value)}),[c,Q]),Object(p.useEffect)((function(){(function(){var e=Object(i.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=P)||!o(t)){e.next=7;break}return e.next=5,C(t);case 5:n=e.sent,Object(j.b)(n)?(N(n),z(!1)):z(!0);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),z(!0),console.error("Error in hashing message",e.t0);case 13:L(""),Y("");case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()().catch(console.error)}),[o,C,P]),Object(O.jsx)(v.a,{children:Object(O.jsxs)(h.a,{className:M.container,children:[Object(O.jsx)(u.a,{component:"h1",variant:"h4",align:"center",children:"Message"}),Object(O.jsx)(h.b,{className:M.options,children:Object(O.jsx)(l.a,{variant:"outlined",value:n,onChange:function(e){return a(e.target.value)},children:t.map((function(e){return Object(O.jsx)(d.a,{value:e,children:e},e)}))})}),Object(O.jsx)(h.b,{className:M.caseGroup,children:c.map((function(e,t){return Object(O.jsx)(b.a,{size:"small",label:e.name,onClick:function(){return function(e){var t=c[e].value;Q(t)}(t)}},e.name)}))}),Object(O.jsx)(g.a,{name:"message_editor",placeholder:"Input Message Here",mode:"json",theme:"tomorrow_night_eighties",value:P,onChange:Q}),Object(O.jsx)(h.c,{height:10}),Object(O.jsx)(m.a,{id:"message_hash",value:H,label:"Message Hash"}),Object(O.jsx)(h.c,{height:10}),Object(O.jsx)(m.a,{id:"signature",value:J,label:"Signature"}),Object(O.jsx)(h.c,{height:10}),Object(O.jsx)(m.a,{id:"recovered_address",value:q,label:"Recovered Address",placeholder:"Please make sure the message and signature are correct"}),Object(O.jsx)(h.c,{height:10}),Object(O.jsxs)(h.b,{className:M.bottomButtonGroup,children:[Object(O.jsx)(f.a,{variant:"contained",color:"primary",disabled:B,onClick:F,children:B&&w?"".concat(w.slice(0,4),"...").concat(w.slice(-4)):"Connect"}),Object(O.jsx)(h.c,{width:16}),Object(O.jsx)(f.a,{variant:"contained",color:"secondary",disabled:R||!B,onClick:X,children:"SIGN"})]})]})})},B=n(52),w=n(24),F=n(75),S='{"types":{"EIP712Domain":[{"name":"name","type":"string"},{"name":"version","type":"string"},{"name":"chainId","type":"uint256"},{"name":"verifyingContract","type":"address"}],"Person":[{"name":"name","type":"string"},{"name":"wallet","type":"address"}],"Mail":[{"name":"from","type":"Person"},{"name":"to","type":"Person"},{"name":"contents","type":"string"}]},"primaryType":"Mail","domain":{"name":"Ether Mail","version":"1","chainId":1,"verifyingContract":"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},"message":{"from":{"name":"Cow","wallet":"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826"},"to":{"name":"Bob","wallet":"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB"},"contents":"Hello, Bob!"}}',I='{"types":{"EIP712Domain":[{"name":"name","type":"string"},{"name":"version","type":"string"},{"name":"chainId","type":"uint256"},{"name":"verifyingContract","type":"address"}],"Person":[{"name":"name","type":"string"},{"name":"wallet","type":"address"}],"Mail":[{"name":"from","type":"Person"},{"name":"to","type":"Person"},{"name":"contents","type":"string"},{"name":"payload","type":"bytes"}]},"primaryType":"Mail","domain":{"name":"Ether Mail","version":"1","chainId":1,"verifyingContract":"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},"message":{"from":{"name":"Cow","wallet":"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826"},"to":{"name":"Bob","wallet":"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB"},"contents":"Hello, Bob!","payload":"0x25192142931f380985072cdd991e37f65cf8253ba7a0e675b54163a1d133b8ca"}}',M='{"types":{"EIP712Domain":[{"name":"name","type":"string"},{"name":"version","type":"string"},{"name":"chainId","type":"uint256"},{"name":"verifyingContract","type":"address"}],"Person":[{"name":"name","type":"string"},{"name":"mother","type":"Person"},{"name":"father","type":"Person"}]},"domain":{"name":"Family Tree","version":"1","chainId":1,"verifyingContract":"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},"primaryType":"Person","message":{"name":"Jon","mother":{"name":"Lyanna","father":{"name":"Rickard"}},"father":{"name":"Rhaegar","father":{"name":"Aeris II"}}}}',_={eth_sign:{name:"eth_sign",cases:[{name:"Demo 1",value:"0x0000000000000000000000000000000000000000000000000000000000000000"},{name:"Demo 2",value:"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"}],checkIsTargetMessage:j.b,hashMessage:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account;return e.library.getSigner(n).provider.provider.send("eth_sign",[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}},personal_sign:{name:"personal_sign",cases:[{name:"Hello OneKey",value:"Hello OneKey"},{name:"To Da Moon",value:"To Da Moon"}],checkIsTargetMessage:function(e){return"string"===typeof e&&e.length>0},hashMessage:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.addHexPrefix(w.hashPersonalMessage(w.toBuffer(t)).toString("hex")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account;return e.library.getSigner(n).provider.send("personal_sign",[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}},typed_data_sign:{name:"typed_data_sign",cases:[{name:"Single Value",value:'[{"type":"string","name":"message","value":"Hi, Alice!"}]'},{name:"Multiple values",value:'[{"type":"string","name":"message","value":"Hi, Alice!"},{"type":"uint8","name":"value","value":10}]'},{name:"With bytes",value:'[{"type":"bytes","name":"message","value":"0xdeadbeaf"}]'}],preferJsonStringMessage:!0,checkIsTargetMessage:j.a,hashMessage:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.addHexPrefix(F.typedSignatureHash(JSON.parse(t))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account,a=e.library;return a.provider.send("eth_signTypedData",a.provider.isMetaMask?[JSON.parse(t),n]:[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}},typed_data_sign_v1:{name:"typed_data_sign_v1",cases:[{name:"Single Value",value:'[{"type":"string","name":"message","value":"Hi, Alice!"}]'},{name:"Multiple values",value:'[{"type":"string","name":"message","value":"Hi, Alice!"},{"type":"uint8","name":"value","value":10}]'},{name:"With bytes",value:'[{"type":"bytes","name":"message","value":"0xdeadbeaf"}]'}],preferJsonStringMessage:!0,checkIsTargetMessage:j.a,hashMessage:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.addHexPrefix(F.typedSignatureHash(JSON.parse(t))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account;return e.library.provider.send("eth_signTypedData_v1",[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}},typed_data_sign_v3:{name:"typed_data_sign_v3",cases:[{name:"Demo",value:S},{name:"With bytes",value:I},{name:"With recursive types",value:M}],preferJsonStringMessage:!0,checkIsTargetMessage:j.d,hashMessage:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.addHexPrefix(F.TypedDataUtils.sign(JSON.parse(t),!1).toString("hex")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account;return e.library.provider.send("eth_signTypedData_v3",[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}},typed_data_sign_v4:{name:"typed_data_sign_v4",cases:[{name:"Demo",value:S},{name:"With bytes",value:I},{name:"With recursive types",value:M},{name:"With array",value:'{"types":{"EIP712Domain":[{"name":"name","type":"string"},{"name":"version","type":"string"},{"name":"chainId","type":"uint256"},{"name":"verifyingContract","type":"address"}],"Person":[{"name":"name","type":"string"},{"name":"wallets","type":"address[]"}],"Mail":[{"name":"from","type":"Person"},{"name":"to","type":"Person[]"},{"name":"contents","type":"string"}],"Group":[{"name":"name","type":"string"},{"name":"members","type":"Person[]"}]},"domain":{"name":"Ether Mail","version":"1","chainId":1,"verifyingContract":"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},"primaryType":"Mail","message":{"from":{"name":"Cow","wallets":["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"]},"to":[{"name":"Bob","wallets":["0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB","0xB0BdaBea57B0BDABeA57b0bdABEA57b0BDabEa57","0xB0B0b0b0b0b0B000000000000000000000000000"]}],"contents":"Hello, Bob!"}}'},{name:"With 2D array",value:'{"types":{"EIP712Domain":[{"name":"name","type":"string"},{"name":"version","type":"string"},{"name":"chainId","type":"uint256"},{"name":"verifyingContract","type":"address"}],"Person":[{"name":"name","type":"string"},{"name":"wallets","type":"address[]"},{"name":"logo_matrix","type":"int[][]"}],"Mail":[{"name":"from","type":"Person"},{"name":"to","type":"Person[]"},{"name":"contents","type":"string"}],"Group":[{"name":"name","type":"string"},{"name":"members","type":"Person[]"}]},"domain":{"name":"Ether Mail","version":"1","chainId":1,"verifyingContract":"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},"primaryType":"Mail","message":{"from":{"name":"Cow","wallets":["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"],"logo_matrix":[[0,255],[-255,-1]]},"to":[{"name":"Bob","wallets":["0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB","0xB0BdaBea57B0BDABeA57b0bdABEA57b0BDabEa57","0xB0B0b0b0b0b0B000000000000000000000000000"],"logo_matrix":[[0,0],[0,0]]}],"contents":"Hello, Bob!"}}'}],preferJsonStringMessage:!0,checkIsTargetMessage:j.d,hashMessage:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.addHexPrefix(F.TypedDataUtils.sign(JSON.parse(t),!0).toString("hex")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account;return e.library.provider.send("eth_signTypedData_v4",[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}}},k=n(377),P=n(375),E=n(111),T=function(e,t){var n=w.toBuffer(e),a=w.toBuffer(t);console.assert(32===n.length,"Invalid message hash: ".concat(e)),console.assert(65===a.length,"Invalid signature: ".concat(t));var r=[a.slice(0,32),a.slice(32,64),a[64]],c=r[0],i=r[1],s=r[2],o=w.ecrecover(n,s,c,i);return w.addHexPrefix(w.pubToAddress(o).toString("hex"))};t.default=function(){var e=Object(B.c)(),t=e.active,n=e.account,a=Object(E.a)(),o=Object(s.a)(a,2)[1],u=Object(p.useState)("eth_sign"),l=Object(s.a)(u,2),d=l[0],b=l[1],f=Object(p.useState)(),h=Object(s.a)(f,2),g=h[0],m=h[1],v=_[d||"eth_sign"],x=Object(p.useCallback)(function(){var t=Object(i.a)(r.a.mark((function t(a){var i,s,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.assert(!!n),i=void 0,s="",o="",t.prev=4,t.next=7,v.signMessage(e,a);case 7:if(!(s=t.sent)||!Object(j.c)(s)){t.next=18;break}return t.t0=T,t.next=12,v.hashMessage(a);case 12:t.t1=t.sent,t.t2=s,o=(0,t.t0)(t.t1,t.t2),i=o.toLowerCase()===(null===n||void 0===n?void 0:n.toLowerCase())?{isPositive:!0,message:"Signature Verified"}:{isPositive:!1,message:"Sorry! The Message Signature Verification Failed"},t.next=19;break;case 18:i={isPositive:!1,message:"Invalid signature"};case 19:t.next=25;break;case 21:t.prev=21,t.t3=t.catch(4),console.error("Error in signing message",t.t3),i={isPositive:!1,message:Object(j.e)(t.t3)};case 25:return i&&m((function(){return Object(c.a)({isOpening:!0},i)})),t.abrupt("return",[s,o]);case 27:case"end":return t.stop()}}),t,null,[[4,21]])})));return function(e){return t.apply(this,arguments)}}(),[e,n,v]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(C,{isWalletEnabled:t,connectedAccount:n,connectWallet:o,methodOptions:Object.keys(_),selectedMethod:d,onMethodSelected:b,cases:v.cases,preferJsonStringMessage:v.preferJsonStringMessage,hashMessage:v.hashMessage,checkIsTargetMessage:v.checkIsTargetMessage,onSign:x}),Object(O.jsx)(k.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:(null===g||void 0===g?void 0:g.isOpening)||!1,autoHideDuration:3e3,onClose:function(){return m((function(e){return Object(c.a)(Object(c.a)({},e),{},{isOpening:!1})}))},children:Object(O.jsx)(P.a,{severity:(null===g||void 0===g?void 0:g.isPositive)?"success":"error",children:null===g||void 0===g?void 0:g.message})})]})}},44:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o}));var a=n(75),r=function(t){if("string"===typeof t&&t.startsWith("0x")&&66===t.length)try{return 32===e.from(t.slice(2),"hex").length}catch(n){console.error(n)}return!1},c=function(t){if("string"==typeof t&&t.startsWith("0x")&&132===t.length)try{return 65===e.from(t.slice(2),"hex").length}catch(n){console.error(n)}return!1},i=function(e){if("string"===typeof e&&e.startsWith("[")&&e.endsWith("]"))try{var t=JSON.parse(e);if(Array.isArray(t))return t.every((function(e){return"object"===typeof e&&"string"===typeof e.type&&"string"==typeof e.name&&void 0!==e.value}))}catch(n){console.error(n)}return!1},s=function(e){if("string"===typeof e&&e.startsWith("{")&&e.endsWith("}"))try{var t=JSON.parse(e);if("object"===typeof t)return a.TYPED_MESSAGE_SCHEMA.required.every((function(e){return!!t[e]}))}catch(n){console.error(n)}return!1},o=function(e){var t=typeof e;return"undefined"===t?"Something wrong":"string"===t?e:"object"===t&&"string"===typeof e.message?e.message:"object"===t&&e.data?JSON.stringify(e.data):JSON.stringify(e)}}).call(this,n(18).Buffer)},71:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return b}));var a=n(129),r=n(311),c=n(52),i=n(185),s=n(5),o=Object(c.b)("NETWORK"),u=window.ethereum;u&&(u.autoRefreshOnNetworkChange=!1);var l=function(){try{var e="https://mainnet.infura.io/v3/3e2aa02b75a143aea34b365e13d2039b";return new a.a({url:e,allowGzip:!0})}catch(t){console.error(t)}},d=function(e){return new r.a(e,"number"===typeof e.chainId?e.chainId:"string"===typeof e.chainId?parseInt(e.chainId):"any")},b=new i.a({});t.b=function(e){var t=e.children;return Object(s.jsx)(c.a,{getLibrary:d,children:Object(s.jsx)(o,{getLibrary:d,children:t})})}},76:function(e,t,n){"use strict";var a=n(27),r=n(112),c=n(320),i=n(5),s=["id","value","label","placeholder"];t.a=function(e){var t=e.id,n=e.value,o=e.label,u=e.placeholder,l=Object(r.a)(e,s);return Object(i.jsx)(c.a,Object(a.a)({id:t,variant:"outlined",value:n,label:o,placeholder:u},l))}},95:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e,t){if("json"===t)return"string"===typeof e&&(e=JSON.parse(e)),JSON.stringify(e,void 0,2);if("text"===t)return"object"===typeof e&&(e=JSON.stringify(e)),e;throw Error("Invalid format: ".concat(t,", value: ").concat(e))}}},[[309,1,2]]]);
//# sourceMappingURL=main.74e98a78.chunk.js.map