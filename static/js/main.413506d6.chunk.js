(this["webpackJsonpweb3-example"]=this["webpackJsonpweb3-example"]||[]).push([[0],{103:function(e,t,n){"use strict";var f=n(35),a=n(137),r=n(131),c=n(365),i=n(157),s=n(6),o=["children"],b=Object(c.a)((function(e){return{paper:Object(r.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(800+2*e.spacing(2)),{width:800,marginLeft:"auto",marginRight:"auto"})}}));t.a=function(e){var t=e.children,n=Object(a.a)(e,o),r=b();return Object(s.jsx)(i.a,Object(f.a)(Object(f.a)({className:r.paper},n),{},{children:t}))}},117:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var f=function(e,t){if("json"===t)return"string"===typeof e&&(e=JSON.parse(e)),JSON.stringify(e,void 0,2);if("text"===t)return"object"===typeof e&&(e=JSON.stringify(e)),e;throw Error("Invalid format: ".concat(t,", value: ").concat(e))}},136:function(e,t,n){"use strict";var f=n(35),a=n(214),r=n.n(a),c=(n(346),n(347),n(48)),i=n(366),s=n(6);t.a=function(e){var t=Object(c.a)(),n=Object(i.a)(t.breakpoints.up(800));return Object(s.jsx)(r.a,Object(f.a)({width:"100%",fontSize:14,showGutter:n,wrapEnabled:!0,showPrintMargin:!0,highlightActiveLine:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,tabSize:2,debounceChangePeriod:600},e))}},24:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s}));var f=n(118),a=Object(f.a)("div")({display:"flex"}),r=Object(f.a)(a)({flexDirection:"column"}),c=Object(f.a)(a)({flexDirection:"row"}),i=Object(f.a)(a)({justifyContent:"center",alignItems:"center"}),s=Object(f.a)("div")((function(e){return{width:e.width,height:e.height}}))},246:function(e,t){},277:function(e,t){},279:function(e,t){},293:function(e,t){},314:function(e,t){},316:function(e,t){},339:function(e,t){},360:function(e,t,n){"use strict";n.r(t);var f=n(22),a=n(4),r=n.n(a),c=n(106),i=n(36),s=n(103),o=n(365),b=n(426),u=n(94),d=n(414),l=n(373),p=n(417),h=n(369),m=n(429),j=n(409),g=n(418),y=n(410),v=n(24),x=n(0),O=n.n(x),C=n(216),w=n.n(C),B=n(6),M=function(e){var t=e.address,n=e.size,f=void 0===n?45:n,a=O.a.createRef();return Object(x.useEffect)((function(){if(t&&f&&null!==a&&a.current){!function(e){for(var t=e.children.length,n=0;n<t;++n)e.removeChild(e.children[n])}(a.current);var e=w()(f,parseInt(t.slice(2,10),16));a.current.appendChild(e)}}),[t,f,a]),Object(B.jsx)("div",{ref:a})},F=n(427),k=n(428),I=Object(o.a)((function(e){return{container:{alignItems:"center",maxHeight:"80vh","& > *":{width:"100%"}},emptyContainer:{flexDirection:"column",height:"30vh",textAlign:"center","& > #logo":{fontSize:80,color:e.palette.divider}},records:{display:"flex",flexDirection:"column-reverse",minHeight:300,overflow:"auto",boxShadow:"inset 0 -1px 1px -1px gray"},recordItemPrimary:{alignItems:"center",fontSize:13,marginBottom:8,"& > #link":{marginLeft:2,fontSize:14,fontWeight:600},"& > #dot":{fontWeight:400,marginLeft:4,marginRight:4},"& > #date":{fontWeight:500}},recordItemSecondary:{maxHeight:80,overflow:"auto"},flexBox:{flex:1},floorLabel:{borderRadius:"10px",backgroundColor:"rgb(240, 240, 240)",color:"rgb(204, 204, 204)",padding:"2px 5px 2px 5px",fontSize:"9px",lineHeight:"9px",fontWeight:600},inputContainer:{alignItems:"center",paddingLeft:16,"& > #send":{transition:"transform 300ms ease-in-out","&:hover":{transform:"rotate(-45deg)"}}}}})),S=function(e){var t=e.record,n=t.id,f=t.sender,a=t.message,r=t.date,c=e.isLastOne,i=e.account,s=I(),o="".concat(n),d="".concat(f.slice(0,6));return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(h.a,{alignItems:"flex-start",children:[Object(B.jsx)(m.a,{children:Object(B.jsx)(b.a,{invisible:i.toLowerCase()!==f.toLowerCase(),badgeContent:"me",anchorOrigin:{vertical:"top",horizontal:"right"},color:"secondary",children:Object(B.jsx)(M,{address:f})})}),Object(B.jsx)(j.a,{disableTypography:!0,primary:Object(B.jsxs)(v.c,{className:s.recordItemPrimary,children:[Object(B.jsx)(g.a,{id:"link",href:"https://blockscan.com/address/".concat(f),target:"_blank",children:d}),Object(B.jsx)(u.a,{id:"dot",variant:"caption",children:"\u2022"}),Object(B.jsx)(u.a,{id:"date",variant:"inherit",color:"textSecondary",children:r}),Object(B.jsx)("div",{className:s.flexBox}),Object(B.jsx)("span",{className:s.floorLabel,children:o})]}),secondary:Object(B.jsx)(u.a,{className:s.recordItemSecondary,variant:"body2",children:a})})]}),!c&&Object(B.jsx)(y.a,{variant:"inset",component:"li"})]})},T=function(e){var t=e.isWrongNetwork,n=e.records,f=e.account,a=e.messageValue,r=e.onMessageValueChange,c=e.submitMessage,i=e.connectWallet,o=I();return Object(B.jsx)(s.a,{children:Object(B.jsxs)(v.b,{className:o.container,children:[Object(B.jsx)(v.a,{children:Object(B.jsx)(b.a,{badgeContent:"Dev",color:"secondary",children:Object(B.jsx)(u.a,{component:"h1",variant:"h4",children:"Discussion"})})}),Object(B.jsx)(v.d,{height:32}),n.length>0?Object(B.jsx)(d.a,{className:o.records,children:n.map((function(e,t,n){return Object(B.jsx)(S,{record:e,isLastOne:t+1===n.length,account:f},e.id)}))}):Object(B.jsxs)(v.a,{className:o.emptyContainer,children:[Object(B.jsx)(F.a,{id:"logo"}),t&&Object(B.jsxs)(u.a,{variant:"body2",color:"error",children:["Wrong network ",Object(B.jsx)("br",{}),"Please connect to the Ropsten Ethereum network."]})]}),Object(B.jsx)(v.d,{height:8}),Object(B.jsxs)(v.c,{className:o.inputContainer,children:[Object(B.jsx)(l.a,{id:"input",fullWidth:!0,multiline:!0,maxRows:3,placeholder:"Join the discussion...",value:a,onChange:function(e){return r(e.target.value)}}),Object(B.jsx)(p.a,{id:"send",color:"primary",disabled:!f,children:Object(B.jsx)(k.a,{onClick:f?c:i})})]})]})})},_=n(8),P=n(10),D=n(43),E=n(34),N=n(13),H=n(12),A=n(435),W=n(125),L=[{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"string",name:"message",type:"string"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isDonated",type:"bool"},{internalType:"uint256",name:"donatedValue",type:"uint256"}],indexed:!1,internalType:"struct Record",name:"record",type:"tuple"}],name:"NewRecord",type:"event"},{inputs:[],name:"MAX_CAPACITY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bool",name:"_enabled",type:"bool"}],name:"changeEnabled",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"changeOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"enabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"historicalDonation",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"recordId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"records",outputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"sender",type:"address"},{internalType:"string",name:"message",type:"string"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isDonated",type:"bool"},{internalType:"uint256",name:"donatedValue",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"message",type:"string"}],name:"submitMessage",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"message",type:"string"}],name:"donate",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"ownerClaim",outputs:[],stateMutability:"nonpayable",type:"function"}],J="0x60806040526000600155600061025a5534801561001b57600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600060146101000a81548160ff021916908315150217905550611401806100866000396000f3fe60806040526004361061009c5760003560e01c80635365a93f116100645780635365a93f1461017b578063708b34fe146101a45780638da5cb5b146101cd578063a6f9dae1146101f8578063b5aebc8014610221578063f7dfe22b1461023d5761009c565b8063238dafe0146100a157806334461067146100cc5780633a5ddf301461010e57806346fea85b146101395780634dbe588914610164575b600080fd5b3480156100ad57600080fd5b506100b6610268565b6040516100c39190610e5a565b60405180910390f35b3480156100d857600080fd5b506100f360048036038101906100ee9190610bd9565b61027b565b60405161010596959493929190610f12565b60405180910390f35b34801561011a57600080fd5b50610123610372565b6040516101309190610ef7565b60405180910390f35b34801561014557600080fd5b5061014e610377565b60405161015b9190610ef7565b60405180910390f35b34801561017057600080fd5b5061017961037e565b005b34801561018757600080fd5b506101a2600480360381019061019d9190610b6f565b610475565b005b3480156101b057600080fd5b506101cb60048036038101906101c69190610b98565b61055f565b005b3480156101d957600080fd5b506101e26105c1565b6040516101ef9190610e3f565b60405180910390f35b34801561020457600080fd5b5061021f600480360381019061021a9190610b46565b6105e5565b005b61023b60048036038101906102369190610b98565b610767565b005b34801561024957600080fd5b50610252610826565b60405161025f9190610ef7565b60405180910390f35b600060149054906101000a900460ff1681565b6002816064811061028b57600080fd5b600602016000915090508060000154908060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020180546102d090611129565b80601f01602080910402602001604051908101604052809291908181526020018280546102fc90611129565b80156103495780601f1061031e57610100808354040283529160200191610349565b820191906000526020600020905b81548152906001019060200180831161032c57829003601f168201915b5050505050908060030154908060040160009054906101000a900460ff16908060050154905086565b606481565b61025a5481565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461040c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161040390610e95565b60405180910390fd5b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc479081150290604051600060405180830381858888f19350505050158015610472573d6000803e3d6000fd5b50565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610503576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104fa90610e95565b60405180910390fd5b801515600060149054906101000a900460ff161515141561052357600080fd5b80600060146101000a81548160ff021916908315150217905550801515600060149054906101000a900460ff1615151461055c57600080fd5b50565b60011515600060149054906101000a900460ff161515146105b5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105ac90610e75565b60405180910390fd5b6105be8161082c565b50565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610673576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161066a90610e95565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff1660008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614156106cc57600080fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508073ffffffffffffffffffffffffffffffffffffffff1660008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461076457600080fd5b50565b60011515600060149054906101000a900460ff161515146107bd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107b490610e75565b60405180910390fd5b60003411610800576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107f790610eb5565b60405180910390fd5b6108098161082c565b3461025a600082825461081c9190611012565b9250508190555050565b60015481565b6000606460015461083d91906111da565b90506040518060c0016040528060015481526020013373ffffffffffffffffffffffffffffffffffffffff168152602001838152602001428152602001600034111515815260200134815250600282606481106108c3577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600602016000820151816000015560208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060408201518160020190805190602001906109349291906109fc565b506060820151816003015560808201518160040160006101000a81548160ff02191690831515021790555060a08201518160050155905050600180600082825461097e9190611012565b925050819055507eb18e8c208b23e00ec2bc777330061d061e60a4610dd00c4b013bd68a61be72600282606481106109df577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600602016040516109f09190610ed5565b60405180910390a15050565b828054610a0890611129565b90600052602060002090601f016020900481019282610a2a5760008555610a71565b82601f10610a4357805160ff1916838001178555610a71565b82800160010185558215610a71579182015b82811115610a70578251825591602001919060010190610a55565b5b509050610a7e9190610a82565b5090565b5b80821115610a9b576000816000905550600101610a83565b5090565b6000610ab2610aad84610f9f565b610f7a565b905082815260208101848484011115610aca57600080fd5b610ad58482856110e7565b509392505050565b600081359050610aec81611386565b92915050565b600081359050610b018161139d565b92915050565b600082601f830112610b1857600080fd5b8135610b28848260208601610a9f565b91505092915050565b600081359050610b40816113b4565b92915050565b600060208284031215610b5857600080fd5b6000610b6684828501610add565b91505092915050565b600060208284031215610b8157600080fd5b6000610b8f84828501610af2565b91505092915050565b600060208284031215610baa57600080fd5b600082013567ffffffffffffffff811115610bc457600080fd5b610bd084828501610b07565b91505092915050565b600060208284031215610beb57600080fd5b6000610bf984828501610b31565b91505092915050565b610c0b8161109f565b82525050565b610c1a8161109f565b82525050565b610c29816110b1565b82525050565b610c38816110b1565b82525050565b6000610c4982610fe5565b610c538185611001565b9350610c638185602086016110f6565b610c6c816112c7565b840191505092915050565b60008154610c8481611129565b610c8e8186610ff0565b94506001821660008114610ca95760018114610cbb57610cee565b60ff1983168652602086019350610cee565b610cc485610fd0565b60005b83811015610ce657815481890152600182019150602081019050610cc7565b808801955050505b50505092915050565b6000610d04602383611001565b9150610d0f826112e5565b604082019050919050565b6000610d27601583611001565b9150610d3282611334565b602082019050919050565b6000610d4a600e83611001565b9150610d558261135d565b602082019050919050565b600060c083016000808401549050610d778161118f565b610d846000870182610e21565b5060018401549050610d958161115b565b610da26020870182610c02565b50600284018583036040870152610db98382610c77565b92505060038401549050610dcc8161118f565b610dd96060870182610e21565b5060048401549050610dea81611175565b610df76080870182610c20565b5060058401549050610e088161118f565b610e1560a0870182610e21565b50819250505092915050565b610e2a816110dd565b82525050565b610e39816110dd565b82525050565b6000602082019050610e546000830184610c11565b92915050565b6000602082019050610e6f6000830184610c2f565b92915050565b60006020820190508181036000830152610e8e81610cf7565b9050919050565b60006020820190508181036000830152610eae81610d1a565b9050919050565b60006020820190508181036000830152610ece81610d3d565b9050919050565b60006020820190508181036000830152610eef8184610d60565b905092915050565b6000602082019050610f0c6000830184610e30565b92915050565b600060c082019050610f276000830189610e30565b610f346020830188610c11565b8181036040830152610f468187610c3e565b9050610f556060830186610e30565b610f626080830185610c2f565b610f6f60a0830184610e30565b979650505050505050565b6000610f84610f95565b9050610f9082826111a9565b919050565b6000604051905090565b600067ffffffffffffffff821115610fba57610fb9611298565b5b610fc3826112c7565b9050602081019050919050565b60008190508160005260206000209050919050565b600081519050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600061101d826110dd565b9150611028836110dd565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0382111561105d5761105c61120b565b5b828201905092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600060ff82169050919050565b6000819050919050565b60006110aa826110bd565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b838110156111145780820151818401526020810190506110f9565b83811115611123576000848401525b50505050565b6000600282049050600182168061114157607f821691505b6020821081141561115557611154611269565b5b50919050565b600061116e611169836112d8565b611068565b9050919050565b6000611188611183836112d8565b611088565b9050919050565b60006111a261119d836112d8565b611095565b9050919050565b6111b2826112c7565b810181811067ffffffffffffffff821117156111d1576111d0611298565b5b80604052505050565b60006111e5826110dd565b91506111f0836110dd565b925082611200576111ff61123a565b5b828206905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b60008160001c9050919050565b7f536f7272792c2074686520636f6e74726163742069732064697361626c65642060008201527f6e6f770000000000000000000000000000000000000000000000000000000000602082015250565b7f596f7520617265206e6f7420746865206f776e65720000000000000000000000600082015250565b7f446f6e617465206e6f7468696e67000000000000000000000000000000000000600082015250565b61138f8161109f565b811461139a57600080fd5b50565b6113a6816110b1565b81146113b157600080fd5b50565b6113bd816110dd565b81146113c857600080fd5b5056fea2646970667358221220e9256e948e71b0b24ecefcf0efa0ed09e15a357939cf7b76e187317cb58e223a64736f6c63430008030033",V=function(e){Object(N.a)(n,e);var t=Object(H.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,L,J,e)}return Object(P.a)(n,[{key:"deploy",value:function(e){return Object(D.a)(Object(E.a)(n.prototype),"deploy",this).call(this,e||{})}},{key:"getDeployTransaction",value:function(e){return Object(D.a)(Object(E.a)(n.prototype),"getDeployTransaction",this).call(this,e||{})}},{key:"attach",value:function(e){return Object(D.a)(Object(E.a)(n.prototype),"attach",this).call(this,e)}},{key:"connect",value:function(e){return Object(D.a)(Object(E.a)(n.prototype),"connect",this).call(this,e)}}],[{key:"createInterface",value:function(){return new A.a.Interface(L)}},{key:"connect",value:function(e,t){return new W.a(e,L,t)}}]),n}(W.b);V.bytecode=J,V.abi=L;var R=[{inputs:[],name:"enabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"changeOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_enabled",type:"bool"}],name:"changeEnabled",outputs:[],stateMutability:"nonpayable",type:"function"}];(function(){function e(){Object(_.a)(this,e)}return Object(P.a)(e,null,[{key:"createInterface",value:function(){return new A.a.Interface(R)}},{key:"connect",value:function(e,t){return new W.a(e,R,t)}}]),e}()).abi=R;var G=n(45),z=n(218),U=n.n(z),K=function(e){return{id:e.id.toNumber(),sender:e.sender,message:e.message,date:U()(1e3*e.timestamp).fromNow(),isDonated:e.isDonated,donatedValue:e.donatedValue.toString()}},Y=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,f,a,i,s,o,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.recordId();case 2:n=e.sent.toNumber(),f=Math.min(n,100),a=[],i=0;case 6:if(!(i<f)){e.next=18;break}for(10,s=Math.min(i+10,f),o=[];i<s;)o.push(t.records(i)),++i;return e.next=13,Promise.all(o);case 13:b=e.sent,a.push.apply(a,Object(c.a)(b.map(K)));case 15:++i,e.next=6;break;case 18:return a.sort((function(e,t){return t.id-e.id})),e.abrupt("return",a);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=function(){var e=Object(G.a)(),t=e.account,n=e.chainId,a=Object(G.f)(),r=Object(G.c)("0xa5954b05e2d7dbc2894bfe2732207ce2d8f656c7",V),i=Object(x.useState)([]),s=Object(f.a)(i,2),o=s[0],b=s[1],u=Object(x.useState)(""),d=Object(f.a)(u,2),l=d[0],p=d[1],h=Object(x.useCallback)((function(){r&&l&&r.submitMessage(l).then((function(){return p("")})).catch(console.error)}),[r,l]);return Object(x.useEffect)((function(){if(r){var e=!1;Y(r).then((function(t){return!e&&b(t)})).catch(console.error);var t=r.filters.NewRecord(),n=function(t){e||b((function(e){return[K(t)].concat(Object(c.a)(e))}))};return r.on(t,n),function(){e=!0,r.removeListener(t,n)}}}),[r,t]),console.log(n),Object(B.jsx)(T,{isWrongNetwork:3!==n,records:o,account:"string"===typeof t?t:"",connectWallet:a,messageValue:l,onMessageValueChange:p,submitMessage:h})}},361:function(e,t,n){"use strict";n.r(t);var f=n(22),a=n(4),r=n.n(a),c=n(36),i=n(35),s=n(24),o=n(365),b=n(94),u=n(373),d=n(370),l=n(103),p=n(136),h=n(92),m=n(215),j=n.n(m),g=n(415),y=n(418),v=n(419),x=n(420),O=n(421),C=n(422),w=n(0),B=n.n(w),M=n(6),F=function(e){var t=e.value,n=e.stripThreshold,a=void 0===n?50:n,r=Object(w.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],b=t&&t.length>=a,u=b?(null===t||void 0===t?void 0:t.slice(0,a))+"...":t;return Object(M.jsx)(M.Fragment,{children:t&&Object(M.jsx)(g.a,{error:!0,children:Object(M.jsxs)(s.c,{children:[u,b&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(s.d,{width:3}),Object(M.jsx)(y.a,{component:"button",onClick:function(){return o(!0)},color:"inherit",underline:"always","aria-label":t,children:"more"}),Object(M.jsxs)(v.a,{scroll:"paper",open:i,onClose:function(){return o(!1)},children:[Object(M.jsx)(x.a,{children:"Error"}),Object(M.jsx)(O.a,{children:Object(M.jsx)(C.a,{children:t})})]})]})]})})})},k=n(423),I=n(222),S=n(416),T=n(424),_=function(e){var t=e.selectedIndex,n=e.actions,a=e.onActionSelect,r=e.groupProps,c=B.a.useState(!1),s=Object(f.a)(c,2),o=s[0],b=s[1],u=B.a.useState(null),l=Object(f.a)(u,2),p=l[0],h=l[1];return Object(M.jsxs)(k.a,Object(i.a)(Object(i.a)({},r),{},{children:[n[t].action,Object(M.jsx)(d.a,{onClick:function(e){var t=e.currentTarget;h(t),b(Boolean(t))},children:Object(M.jsx)(T.a,{})}),Object(M.jsx)(I.a,{keepMounted:!0,anchorEl:p,open:o,onClose:function(){return b(!1)},children:n.map((function(e,n){return Object(M.jsx)(S.a,{selected:n===t,onClick:function(){a(e,n),b(!1)},children:e.label},e.label)}))})]}))},P=Object(o.a)((function(e){return{container:{alignItems:"center","& > *":{width:"100%"}},bottomContainer:{justifyContent:"flex-end",flexWrap:"wrap","& > *":{marginBottom:"8px"}},nodeInput:{height:"40px",borderColor:"transparent",borderRadius:0},actionBtn:{marginLeft:"16px"}}})),D=function(e){var t=e.rawTransactionHelperText,n=e.rawTransactionValue,f=e.onRawTransactionInputChange,a=e.jsonTransactionHelperText,r=e.jsonTransactionValue,c=e.onJsonTransactionInputChange,o=e.txidValue,m=e.senderAddressValue,g=e.nodeSelectedIndex,y=e.onNodeSelect,v=e.isWalletInjected,x=e.injectWallet,O=e.customNodeValue,C=e.onCustomNodeValueChange,w=e.actionBtnState,B=P();return Object(M.jsx)(l.a,{children:Object(M.jsxs)(s.b,{className:B.container,children:[Object(M.jsx)(b.a,{component:"h1",variant:"h4",align:"center",children:"Transaction"}),Object(M.jsx)(s.d,{height:32}),Object(M.jsx)(p.a,{name:"transaction_editor",placeholder:'\n// Input json format transaction here like this:\n{\n  "nonce": 0,\n  "gasPrice": "0x0df8475800",\n  "gasLimit": "0x0186a0",\n  "to": "0x3535353535353535353535353535353535353535",\n  "value": "0x64",\n  "data": "0x",\n  "chainId": 0,\n  "v": 27,\n  "r": "0x82de9950cc5aac0dca7210cb4b77320ac9e844717d39b1781e9d941d920a1206",\n  "s": "0x1da497b3c134f50b2fce514d66e20c5e43f9615f097395a5527041d14860a52f"\n}\n',mode:"json",theme:"tomorrow_night_eighties",value:r,onChange:c,"aria-describedby":"transaction_editor_helper_text"}),a&&Object(M.jsx)(F,{value:a}),Object(M.jsx)(s.d,{height:3}),Object(M.jsx)(j.a,{color:"disabled"}),Object(M.jsx)(s.d,{height:3}),Object(M.jsx)(u.a,{error:!!t,multiline:!0,maxRows:5,variant:"outlined",label:n&&n.length>0?"Raw Transaction":void 0,placeholder:"\n// or hex string raw transaction like this:\n0xf86580850df8475800830186a094353535353535353535353535353535353535353564801ba082de9950cc5aac0dca7210cb4b77320ac9e844717d39b1781e9d941d920a1206a01da497b3c134f50b2fce514d66e20c5e43f9615f097395a5527041d14860a52f\n",value:n,onChange:function(e){return f(e.target.value)}}),t&&Object(M.jsx)(F,{value:t}),Object(M.jsx)(s.d,{height:16}),Object(M.jsx)(h.a,{id:"txid",FormHelperTextProps:{variant:"standard"},value:o,label:"Txid"}),Object(M.jsx)(s.d,{height:8}),Object(M.jsx)(h.a,{id:"sender_address",value:m,label:"Sender Address"}),Object(M.jsx)(s.d,{height:16}),Object(M.jsxs)(s.c,{className:B.bottomContainer,children:[Object(M.jsx)(_,{selectedIndex:g,onActionSelect:function(e,t){return y(t)},actions:[{label:"Default ETH Mainnet",action:Object(M.jsx)(d.a,{children:"ETH Mainnet"})},{label:"Connect Wallet",action:Object(M.jsx)(d.a,{onClick:x,children:v?"Connected":"Connect Wallet"})},{label:"Custom",action:Object(M.jsx)(u.a,{variant:"outlined",value:O,placeholder:"https://my_rpc_node.com",onChange:function(e){return C(e.target.value)},InputProps:{className:B.nodeInput}})}],groupProps:{variant:"contained",color:"primary"}}),Object(M.jsx)(d.a,Object(i.a)({className:B.actionBtn,variant:"contained",color:"secondary"},w))]})]})})},E=n(117),N=n(27),H=n(32),A=n(25),W={chain_id:"chainId",gas_limit:"gasLimit",gas:"gasLimit",gas_price:"gasPrice",access_list:"accessList",max_priority_fee_per_gas:"maxPriorityFeePerGas",max_fee_per_gas:"maxFeePerGas",input:"data"},L=function(e){return"undefined"===typeof e?"0x00":A.a.from("number"===typeof e?e.toString():e).toHexString()},J=function(e){return parseInt(L(e),16)},V={hash:H.addHexPrefix,from:H.addHexPrefix,to:H.addHexPrefix,nonce:J,gasLimit:function(e){return L(Math.max(21e3,J(e)))},gasPrice:L,data:H.addHexPrefix,value:L,chainId:J,type:J,maxPriorityFeePerGas:L,maxFeePerGas:L,r:H.addHexPrefix,s:H.addHexPrefix,v:J},R=["to","nonce","gasLimit","gasPrice","data","value","chainId","type","accessList","maxPriorityFeePerGas","maxFeePerGas"],G=["r","s","v"],z=[].concat(R,G,["hash","from"]),U=function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(f.a)(e,2);t[0];return!function(e){return"undefined"===typeof e||null===e||"string"===typeof e&&0===e.length}(t[1])})).map((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];return[n in W?W[n]:n,n in V?V[n](a):a]})).filter((function(e){var t=Object(f.a)(e,2),n=t[0];t[1];return z.includes(n)})))},K=function(e){var t=U(e),n=function(e){var t=Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(f.a)(e,2),n=t[0];return t[1],G.includes(n)})));return Object.keys(t).length!==G.length&&(t=void 0),t}(t),a=Object.fromEntries(Object.entries(t).filter((function(e){var t=Object(f.a)(e,2),n=t[0];t[1];return R.includes(n)})));return Object(N.f)(a,n)},Y=function(e){return U(Object(N.d)(e))},q={1:"https://etherscan.io/tx/{0}",3:"https://ropsten.etherscan.io/tx/{0}",56:"https://bscscan.com/tx/{0}",97:"https://testnet.bscscan.com/tx/{0}",128:"https://hecoinfo.com/tx/{0}",256:"https://testnet.hecoinfo.com/{0}"},X=n(45),Q=n(364),Z=n(221),$=n(425),ee={disabled:!0,children:"Pending"},te=function(){var e=Object(c.a)(r.a.mark((function e(t,n,f){var a,c,i,s,o,b,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.signed,c=n.txid,i=n.chainId,s=n.payload,o=void 0,e.next=4,t.getNetwork();case 4:if(b=e.sent,!a){e.next=18;break}if(i===b.chainId){e.next=10;break}o={disabled:!0,children:"ChainId Mismatched"},e.next=15;break;case 10:if(!c){e.next=15;break}return e.next=13,t.send("eth_getTransactionByHash",[c]);case 13:"object"===typeof(u=e.sent)&&null!==u&&u.hash===c&&(o={disabled:!1,children:"Transaction Found!",onClick:function(){return window.open((q[i]||"https://blockscan.com/tx/{0}").replace("{0}",c))}});case 15:o||(o={disabled:!1,children:"Broadcast",onClick:function(){return t.send("eth_sendRawTransaction",[K(s)])}}),e.next=19;break;case 18:t instanceof Q.a&&(o={disabled:!1,children:"Sign & Broadcast",onClick:function(){return t.getSigner().sendTransaction(Object.assign(s,{chainId:b.chainId})).then((function(e){return f(Object.assign(e,{chainId:b.chainId}))}))}});case 19:return e.abrupt("return",o||ee);case 20:case"end":return e.stop()}}),e)})));return function(t,n,f){return e.apply(this,arguments)}}();t.default=function(){var e=Object(X.e)(),t=e.active,n=e.library,a=Object(X.b)().library,i=Object(X.f)(),s=Object(w.useState)(""),o=Object(f.a)(s,2),b=o[0],u=o[1],d=Object(w.useState)(),l=Object(f.a)(d,2),p=l[0],h=l[1],m=Object(w.useState)(""),j=Object(f.a)(m,2),g=j[0],y=j[1],v=Object(w.useState)(),x=Object(f.a)(v,2),O=x[0],C=x[1],B=Object(w.useState)(),F=Object(f.a)(B,2),k=F[0],I=F[1],S=Object(w.useState)(0),T=Object(f.a)(S,2),_=T[0],P=T[1],N=Object(w.useState)(""),A=Object(f.a)(N,2),W=A[0],L=A[1],J=Object(w.useMemo)((function(){return 0===_?a:1===_?n:2===_&&function(e){var t,n,f;try{f=new URL(e)}catch(a){}return"http:"===(null===(t=f)||void 0===t?void 0:t.protocol)||"https:"===(null===(n=f)||void 0===n?void 0:n.protocol)}(W)?new Z.a({url:W}):void 0}),[_,n,a,W]),V=Object(w.useState)(ee),R=Object(f.a)(V,2),G=R[0],z=R[1],U=function(){var e=Object(c.a)(r.a.mark((function e(t,n){var f,a,c,i,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("raw_tx"===n?f=Object(H.addHexPrefix)(t.trim()):t&&(a=JSON.parse(t),f=K(a)),f){e.next=4;break}return I(void 0),e.abrupt("return");case 4:c=Y(f),i=c.hash,s=c.from,i&&delete c.hash,s&&delete c.from,o={txid:i,chainId:c.chainId,signed:Boolean(c.r&&c.s&&"number"===typeof c.v),sender:s,payload:c},C(void 0),y(f),h(void 0),u(Object(E.a)(c,"json")),I(o);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=Object(w.useCallback)((function(e){e!==b?U(e,"json_tx").catch((function(t){console.error(t);try{e=Object(E.a)(e,"json")}catch(n){}u(e),h(null===t||void 0===t?void 0:t.message)})):e||(u(e),h(void 0))}),[b]);return Object(w.useEffect)((function(){var e=!1;return"undefined"!==typeof J&&"undefined"!==typeof k?(z({disabled:!1,children:Object(M.jsx)($.a,{color:"inherit",size:24})}),te(J,k,(function(t){return!e&&q(JSON.stringify(t))})).then((function(t){return!e&&z((function(){return t}))})).catch(console.error)):z(ee),function(){e=!0}}),[J,k,q]),Object(w.useEffect)((function(){n&&P(1)}),[n]),Object(M.jsx)(D,{rawTransactionHelperText:O,rawTransactionValue:g,onRawTransactionInputChange:function(e){e?U(e,"raw_tx").catch((function(t){console.error(t),C(null===t||void 0===t?void 0:t.message),y(e)})):(y(e),C(void 0))},jsonTransactionHelperText:p,jsonTransactionValue:b,onJsonTransactionInputChange:q,txidValue:(null===k||void 0===k?void 0:k.txid)||"",senderAddressValue:(null===k||void 0===k?void 0:k.sender)||"",nodeSelectedIndex:_,onNodeSelect:P,isWalletInjected:t,injectWallet:i,customNodeValue:W,onCustomNodeValueChange:L,actionBtnState:G})}},362:function(e,t,n){"use strict";n.r(t);var f=n(0),a=n.n(f),r=n(28),c=n.n(r),i=n(90),s=n(69),o=n(45),b=n(6),u=Object(i.b)(s.a),d=function(){return Object(o.d)(),Object(b.jsx)(b.Fragment,{})},l=function(e){var t=e.children;return Object(b.jsx)(i.a,{getLibrary:s.c,children:Object(b.jsxs)(u,{getLibrary:s.c,children:[Object(b.jsx)(d,{}),t]})})},p=n(22),h=n(365),m=n(432),j=n(433),g=n(417),y=n(94),v=n(434),x=n(219),O=n.n(x),C=n(35),w=n(48),B=n(366),M=n(439),F=n(369),k=n(409),I=n(410),S=n(24),T=Object(h.a)((function(e){return{drawer:{},drawerPaper:{marginTop:e.spacing(8),width:240,height:300},drawerHeader:Object(C.a)(Object(C.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),menuItem:{height:e.spacing(8)}}})),_=function(e){var t=e.menus,n=e.open,a=e.onDrawerItemClick,r=e.onClose,c=T(),i=Object(w.a)(),s=Object(B.a)(i.breakpoints.down(800)),o=Object(f.useMemo)((function(){return s?{anchor:"bottom"}:{anchor:"left",className:c.drawer,classes:{paper:c.drawerPaper}}}),[c,s]);return Object(b.jsxs)(M.a,Object(C.a)(Object(C.a)({open:n,onClose:r},o),{},{children:[t.map((function(e,t){return Object(b.jsx)(F.a,{className:c.menuItem,button:!0,onClick:function(){return a(e,t)},divider:!s,children:Object(b.jsx)(k.a,{primary:e})},e)})),s&&Object(b.jsx)(I.a,{}),Object(b.jsx)(S.d,{height:i.spacing(6)})]}))},P=Object(h.a)((function(e){return{appBar:{color:"default",position:"relative"},main:{width:"auto",marginLeft:e.spacing(1),marginRight:e.spacing(1)}}})),D={Message:function(){return n(363).default},Transaction:function(){return n(361).default},Discussion:function(){return n(360).default}},E=Object.keys(D),N=E[0],H=function(e){var t=e.onDrawerBtnClick,n=P();return Object(b.jsx)(m.a,{className:n.appBar,children:Object(b.jsxs)(j.a,{children:[Object(b.jsx)(g.a,{color:"inherit","aria-label":"open drawer",onClick:t,edge:"start",children:Object(b.jsx)(O.a,{})}),Object(b.jsx)(y.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Web3 Example"})]})})},A=function(){var e=P(),t=Object(f.useState)(!1),n=Object(p.a)(t,2),a=n[0],r=n[1],c=Object(f.useState)(D[N]),i=Object(p.a)(c,2),s=i[0],o=i[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v.a,{}),Object(b.jsx)(H,{onDrawerBtnClick:function(){return r((function(e){return!e}))}}),Object(b.jsx)(_,{menus:E,open:a,onClose:function(){return r((function(){return!1}))},onDrawerItemClick:function(e){o(D[e]),r(!1)}}),Object(b.jsx)("main",{className:e.main,children:Object(b.jsx)(s,{})})]})};c.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(l,{children:Object(b.jsx)(A,{})})}),document.getElementById("root"))},363:function(e,t,n){"use strict";n.r(t);var f=n(4),a=n.n(f),r=n(35),c=n(36),i=n(22),s=n(365),o=n(94),b=n(437),u=n(416),d=n(441),l=n(370),p=n(24),h=n(0),m=n(59),j=n(136),g=n(92),y=n(103),v=n(117),x=n(6),O=Object(s.a)((function(e){return{container:{padding:0},options:{justifyContent:"flex-end",alignItems:"center",margin:e.spacing(3,0,1)},caseGroup:{flexWrap:"wrap",padding:0,marginBottom:e.spacing(1),"& > *":{margin:e.spacing(.5)}},bottomButtonGroup:{justifyContent:"flex-end",padding:0}}})),C=function(e){var t=e.methodOptions,n=e.selectedMethod,f=e.onMethodSelected,r=e.cases,s=e.checkIsTargetMessage,C=e.hashMessage,w=e.isWalletEnabled,B=e.connectedAccount,M=e.connectWallet,F=e.onSign,k=e.preferJsonStringMessage,I=O(),S=Object(h.useState)(""),T=Object(i.a)(S,2),_=T[0],P=T[1],D=Object(h.useState)(""),E=Object(i.a)(D,2),N=E[0],H=E[1],A=Object(h.useState)(""),W=Object(i.a)(A,2),L=W[0],J=W[1],V=Object(h.useState)(!0),R=Object(i.a)(V,2),G=R[0],z=R[1],U=Object(h.useState)(""),K=Object(i.a)(U,2),Y=K[0],q=K[1],X=Object(h.useCallback)((function(e){var t=Object(v.a)(e,k?"json":"text");P(t)}),[k]),Q=Object(h.useCallback)(Object(c.a)(a.a.mark((function e(){var t,n,f,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(_);case 2:t=e.sent,n=Object(i.a)(t,2),f=n[0],r=n[1],J(f),q(r);case 8:case"end":return e.stop()}}),e)}))),[_,F]);return Object(h.useEffect)((function(){r[0].value&&X(r[0].value)}),[r,X]),Object(h.useEffect)((function(){(function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=_)||!s(t)){e.next=7;break}return e.next=5,C(t);case 5:n=e.sent,Object(m.b)(n)?(H(n),z(!1)):z(!0);case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),z(!0),console.error("Error in hashing message",e.t0);case 13:J(""),q("");case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()().catch(console.error)}),[s,C,_]),Object(x.jsx)(y.a,{children:Object(x.jsxs)(p.b,{className:I.container,children:[Object(x.jsx)(o.a,{component:"h1",variant:"h4",align:"center",children:"Message"}),Object(x.jsx)(p.c,{className:I.options,children:Object(x.jsx)(b.a,{variant:"outlined",value:n,onChange:function(e){return f(e.target.value)},children:t.map((function(e){return Object(x.jsx)(u.a,{value:e,children:e},e)}))})}),Object(x.jsx)(p.c,{className:I.caseGroup,children:r.map((function(e,t){return Object(x.jsx)(d.a,{size:"small",label:e.name,onClick:function(){return function(e){var t=r[e].value;X(t)}(t)}},e.name)}))}),Object(x.jsx)(j.a,{name:"message_editor",placeholder:"Input Message Here",mode:"json",theme:"tomorrow_night_eighties",value:_,onChange:X}),Object(x.jsx)(p.d,{height:10}),Object(x.jsx)(g.a,{id:"message_hash",value:N,label:"Message Hash"}),Object(x.jsx)(p.d,{height:10}),Object(x.jsx)(g.a,{id:"signature",value:L,label:"Signature"}),Object(x.jsx)(p.d,{height:10}),Object(x.jsx)(g.a,{id:"recovered_address",value:Y,label:"Recovered Address",placeholder:"Please make sure the message and signature are correct"}),Object(x.jsx)(p.d,{height:10}),Object(x.jsxs)(p.c,{className:I.bottomButtonGroup,children:[Object(x.jsx)(l.a,{variant:"contained",color:"primary",disabled:w,onClick:M,children:w&&B?"".concat(B.slice(0,4),"...").concat(B.slice(-4)):"Connect"}),Object(x.jsx)(p.d,{width:16}),Object(x.jsx)(l.a,{variant:"contained",color:"secondary",disabled:G||!w,onClick:Q,children:"SIGN"})]})]})})},w=n(32),B=n(91),M='{"types":{"EIP712Domain":[{"name":"name","type":"string"},{"name":"version","type":"string"},{"name":"chainId","type":"uint256"},{"name":"verifyingContract","type":"address"}],"Person":[{"name":"name","type":"string"},{"name":"wallet","type":"address"}],"Mail":[{"name":"from","type":"Person"},{"name":"to","type":"Person"},{"name":"contents","type":"string"}]},"primaryType":"Mail","domain":{"name":"Ether Mail","version":"1","chainId":1,"verifyingContract":"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},"message":{"from":{"name":"Cow","wallet":"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826"},"to":{"name":"Bob","wallet":"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB"},"contents":"Hello, Bob!"}}',F='{"types":{"EIP712Domain":[{"name":"name","type":"string"},{"name":"version","type":"string"},{"name":"chainId","type":"uint256"},{"name":"verifyingContract","type":"address"}],"Person":[{"name":"name","type":"string"},{"name":"wallet","type":"address"}],"Mail":[{"name":"from","type":"Person"},{"name":"to","type":"Person"},{"name":"contents","type":"string"},{"name":"payload","type":"bytes"}]},"primaryType":"Mail","domain":{"name":"Ether Mail","version":"1","chainId":1,"verifyingContract":"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},"message":{"from":{"name":"Cow","wallet":"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826"},"to":{"name":"Bob","wallet":"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB"},"contents":"Hello, Bob!","payload":"0x25192142931f380985072cdd991e37f65cf8253ba7a0e675b54163a1d133b8ca"}}',k='{"types":{"EIP712Domain":[{"name":"name","type":"string"},{"name":"version","type":"string"},{"name":"chainId","type":"uint256"},{"name":"verifyingContract","type":"address"}],"Person":[{"name":"name","type":"string"},{"name":"mother","type":"Person"},{"name":"father","type":"Person"}]},"domain":{"name":"Family Tree","version":"1","chainId":1,"verifyingContract":"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},"primaryType":"Person","message":{"name":"Jon","mother":{"name":"Lyanna","father":{"name":"Rickard"}},"father":{"name":"Rhaegar","father":{"name":"Aeris II"}}}}',I={eth_sign:{name:"eth_sign",cases:[{name:"Demo 1",value:"0x0000000000000000000000000000000000000000000000000000000000000000"},{name:"Demo 2",value:"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"}],checkIsTargetMessage:m.b,hashMessage:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account;return e.library.getSigner(n).provider.provider.send("eth_sign",[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}},personal_sign:{name:"personal_sign",cases:[{name:"Hello OneKey",value:"Hello OneKey"},{name:"To Da Moon",value:"To Da Moon"}],checkIsTargetMessage:function(e){return"string"===typeof e&&e.length>0},hashMessage:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.addHexPrefix(w.hashPersonalMessage(w.toBuffer(t)).toString("hex")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account;return e.library.getSigner(n).provider.send("personal_sign",[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}},typed_data_sign:{name:"typed_data_sign",cases:[{name:"Single Value",value:'[{"type":"string","name":"message","value":"Hi, Alice!"}]'},{name:"Multiple values",value:'[{"type":"string","name":"message","value":"Hi, Alice!"},{"type":"uint8","name":"value","value":10}]'},{name:"With bytes",value:'[{"type":"bytes","name":"message","value":"0xdeadbeaf"}]'}],preferJsonStringMessage:!0,checkIsTargetMessage:m.a,hashMessage:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.addHexPrefix(B.typedSignatureHash(JSON.parse(t))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account,f=e.library;return f.provider.send("eth_signTypedData",f.provider.isMetaMask?[JSON.parse(t),n]:[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}},typed_data_sign_v1:{name:"typed_data_sign_v1",cases:[{name:"Single Value",value:'[{"type":"string","name":"message","value":"Hi, Alice!"}]'},{name:"Multiple values",value:'[{"type":"string","name":"message","value":"Hi, Alice!"},{"type":"uint8","name":"value","value":10}]'},{name:"With bytes",value:'[{"type":"bytes","name":"message","value":"0xdeadbeaf"}]'}],preferJsonStringMessage:!0,checkIsTargetMessage:m.a,hashMessage:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.addHexPrefix(B.typedSignatureHash(JSON.parse(t))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account;return e.library.provider.send("eth_signTypedData_v1",[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}},typed_data_sign_v3:{name:"typed_data_sign_v3",cases:[{name:"Demo",value:M},{name:"With bytes",value:F},{name:"With recursive types",value:k}],preferJsonStringMessage:!0,checkIsTargetMessage:m.d,hashMessage:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.addHexPrefix(B.TypedDataUtils.sign(JSON.parse(t),!1).toString("hex")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account;return e.library.provider.send("eth_signTypedData_v3",[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}},typed_data_sign_v4:{name:"typed_data_sign_v4",cases:[{name:"Demo",value:M},{name:"With bytes",value:F},{name:"With recursive types",value:k},{name:"With array",value:'{"types":{"EIP712Domain":[{"name":"name","type":"string"},{"name":"version","type":"string"},{"name":"chainId","type":"uint256"},{"name":"verifyingContract","type":"address"}],"Person":[{"name":"name","type":"string"},{"name":"wallets","type":"address[]"}],"Mail":[{"name":"from","type":"Person"},{"name":"to","type":"Person[]"},{"name":"contents","type":"string"}],"Group":[{"name":"name","type":"string"},{"name":"members","type":"Person[]"}]},"domain":{"name":"Ether Mail","version":"1","chainId":1,"verifyingContract":"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},"primaryType":"Mail","message":{"from":{"name":"Cow","wallets":["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"]},"to":[{"name":"Bob","wallets":["0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB","0xB0BdaBea57B0BDABeA57b0bdABEA57b0BDabEa57","0xB0B0b0b0b0b0B000000000000000000000000000"]}],"contents":"Hello, Bob!"}}'},{name:"With 2D array",value:'{"types":{"EIP712Domain":[{"name":"name","type":"string"},{"name":"version","type":"string"},{"name":"chainId","type":"uint256"},{"name":"verifyingContract","type":"address"}],"Person":[{"name":"name","type":"string"},{"name":"wallets","type":"address[]"},{"name":"logo_matrix","type":"int[][]"}],"Mail":[{"name":"from","type":"Person"},{"name":"to","type":"Person[]"},{"name":"contents","type":"string"}],"Group":[{"name":"name","type":"string"},{"name":"members","type":"Person[]"}]},"domain":{"name":"Ether Mail","version":"1","chainId":1,"verifyingContract":"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},"primaryType":"Mail","message":{"from":{"name":"Cow","wallets":["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"],"logo_matrix":[[0,255],[-255,-1]]},"to":[{"name":"Bob","wallets":["0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB","0xB0BdaBea57B0BDABeA57b0bdABEA57b0BDabEa57","0xB0B0b0b0b0b0B000000000000000000000000000"],"logo_matrix":[[0,0],[0,0]]}],"contents":"Hello, Bob!"}}'}],preferJsonStringMessage:!0,checkIsTargetMessage:m.d,hashMessage:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w.addHexPrefix(B.TypedDataUtils.sign(JSON.parse(t),!0).toString("hex")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(e,t){var n=e.account;return e.library.provider.send("eth_signTypedData_v4",[n,t]).then((function(e){return(null===e||void 0===e?void 0:e.result)||e}))}}},S=n(438),T=n(436),_=n(45),P=function(e,t){var n=w.toBuffer(e),f=w.toBuffer(t);console.assert(32===n.length,"Invalid message hash: ".concat(e)),console.assert(65===f.length,"Invalid signature: ".concat(t));var a=[f.slice(0,32),f.slice(32,64),f[64]],r=a[0],c=a[1],i=a[2],s=w.ecrecover(n,i,r,c);return w.addHexPrefix(w.pubToAddress(s).toString("hex"))};t.default=function(){var e=Object(_.e)(),t=e.active,n=e.account,f=Object(_.f)(),s=Object(h.useState)("eth_sign"),o=Object(i.a)(s,2),b=o[0],u=o[1],d=Object(h.useState)(),l=Object(i.a)(d,2),p=l[0],j=l[1],g=I[b||"eth_sign"],y=Object(h.useCallback)(function(){var t=Object(c.a)(a.a.mark((function t(f){var c,i,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.assert(!!n),c=void 0,i="",s="",t.prev=4,t.next=7,g.signMessage(e,f);case 7:if(!(i=t.sent)||!Object(m.c)(i)){t.next=18;break}return t.t0=P,t.next=12,g.hashMessage(f);case 12:t.t1=t.sent,t.t2=i,s=(0,t.t0)(t.t1,t.t2),c=s.toLowerCase()===(null===n||void 0===n?void 0:n.toLowerCase())?{isPositive:!0,message:"Signature Verified"}:{isPositive:!1,message:"Sorry! The Message Signature Verification Failed"},t.next=19;break;case 18:c={isPositive:!1,message:"Invalid signature"};case 19:t.next=25;break;case 21:t.prev=21,t.t3=t.catch(4),console.error("Error in signing message",t.t3),c={isPositive:!1,message:Object(m.e)(t.t3)};case 25:return c&&j((function(){return Object(r.a)({isOpening:!0},c)})),t.abrupt("return",[i,s]);case 27:case"end":return t.stop()}}),t,null,[[4,21]])})));return function(e){return t.apply(this,arguments)}}(),[e,n,g]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(C,{isWalletEnabled:t,connectedAccount:n,connectWallet:f,methodOptions:Object.keys(I),selectedMethod:b,onMethodSelected:u,cases:g.cases,preferJsonStringMessage:g.preferJsonStringMessage,hashMessage:g.hashMessage,checkIsTargetMessage:g.checkIsTargetMessage,onSign:y}),Object(x.jsx)(S.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:(null===p||void 0===p?void 0:p.isOpening)||!1,autoHideDuration:3e3,onClose:function(){return j((function(e){return Object(r.a)(Object(r.a)({},e),{},{isOpening:!1})}))},children:Object(x.jsx)(T.a,{severity:(null===p||void 0===p?void 0:p.isPositive)?"success":"error",children:null===p||void 0===p?void 0:p.message})})]})}},45:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return p}));var f=n(4),a=n.n(f),r=n(36),c=n(90),i=n(0),s=n(69),o=function(){return Object(c.c)()},b=function(){return Object(c.c)(s.a)},u=function(){var e=o(),t=b();return(null===e||void 0===e?void 0:e.active)?e:t},d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?s.a:void 0,n=Object(c.c)(t),f=n.active,o=n.activate;return Object(i.useCallback)(Object(r.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f||!o){t.next=3;break}return n=e?s.b:s.d,t.abrupt("return",o(n));case 3:case"end":return t.stop()}}),t)}))),[f,o,e])},l=function(){var e=d(),t=d(!0);Object(i.useEffect)((function(){Promise.all([s.d.isAuthorized().then((function(t){if(t)return e()})),t()]).catch(console.error)}),[e,t])},p=function(e,t){var n=u(),f=n.library,a=n.account;return Object(i.useMemo)((function(){if(e&&f)return t.connect(e,"string"===typeof a?f.getSigner(a):f)}),[e,t,f,a])}},59:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return s}));var f=n(91),a=function(t){if("string"===typeof t&&t.startsWith("0x")&&66===t.length)try{return 32===e.from(t.slice(2),"hex").length}catch(n){console.error(n)}return!1},r=function(t){if("string"==typeof t&&t.startsWith("0x")&&132===t.length)try{return 65===e.from(t.slice(2),"hex").length}catch(n){console.error(n)}return!1},c=function(e){if("string"===typeof e&&e.startsWith("[")&&e.endsWith("]"))try{var t=JSON.parse(e);if(Array.isArray(t))return t.every((function(e){return"object"===typeof e&&"string"===typeof e.type&&"string"==typeof e.name&&void 0!==e.value}))}catch(n){console.error(n)}return!1},i=function(e){if("string"===typeof e&&e.startsWith("{")&&e.endsWith("}"))try{var t=JSON.parse(e);if("object"===typeof t)return f.TYPED_MESSAGE_SCHEMA.required.every((function(e){return!!t[e]}))}catch(n){console.error(n)}return!1},s=function(e){var t=typeof e;return"undefined"===t?"Something wrong":"string"===t?e:"object"===t&&"string"===typeof e.message?e.message:"object"===t&&e.data?JSON.stringify(e.data):JSON.stringify(e)}}).call(this,n(26).Buffer)},69:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return u}));var f=n(364),a=n(206),r=n(207),c=window.ethereum;c&&(c.autoRefreshOnNetworkChange=!1);var i="3e2aa02b75a143aea34b365e13d2039b";var s=new r.a({urls:{1:"https://mainnet.infura.io/v3/".concat(i)},defaultChainId:1}),o="BACKUP",b=function(e){var t=new f.a(e,"number"===typeof e.chainId?e.chainId:"string"===typeof e.chainId?parseInt(e.chainId):"any");return t.pollingInterval=15e3,t},u=new a.a({})},92:function(e,t,n){"use strict";var f=n(35),a=n(137),r=n(373),c=n(6),i=["id","value","label","placeholder"];t.a=function(e){var t=e.id,n=e.value,s=e.label,o=e.placeholder,b=Object(a.a)(e,i);return Object(c.jsx)(r.a,Object(f.a)({id:t,variant:"outlined",value:n,label:s,placeholder:o},b))}}},[[362,1,2]]]);
//# sourceMappingURL=main.413506d6.chunk.js.map